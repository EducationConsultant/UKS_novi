sudo: required
language: python
python:
- '3.5'
addons:
  apt:
    packages:
    - sshpass
services:
- docker
before_install:
- docker --version
- docker login -u "$DOCKER_HUB_USERNAME" -p "$DOCKER_HUB_PASSWORD";
- docker images
- docker ps 
- openssl aes-256-cbc -K $encrypted_dcc2dc14fc59_key -iv $encrypted_dcc2dc14fc59_iv
  -in deploy_key.enc -out ./deploy_key -d
- cd ProjekatUKS/  
install:
- pip install -r requirements.txt
script:
- docker-compose run web python3 manage.py makemigrations
- docker-compose run web python3 manage.py migrate
- docker-compose run web python3 manage.py test
after_success:
- docker build -t $DOCKER_HUB_USERNAME/uks_novi:proba .
- docker push $DOCKER_HUB_USERNAME/uks_novi:proba
- export SSHPASS=$DEPLOY_PASS
- ls
- cd ..
deploy:
  provider: script
  skip_cleanup: true
  script: chmod 600 deploy_key && sshpass -e ssh -o StrictHostKeyChecking=no -i ./deploy_key
    $HOST@$HOST_IP 'cd boohub && ./deploy.sh'
  on:
    branch: deployC
env:
  global:
  - secure: kneXgvK5aCIXnNkVzfBAu4UpK+HyKtDhtl5pqaH4wXLRAPtHLloY1A4hDajYj1leZFvlnYlSdp4aW66GjWOxpzWmtIXvSRrYMCMtyW/omwaHkJzBWcRQ+aSsS8ZgeKnwhqgqLdfoB0cOnTlte+5lii5FNi/JXliXrHX5DxXFFZ7OMS0pMpRURDpyzZ8vTn8LXw5MTrSwTYHcNFXxzJOwwWZIt6EloIThOn/ixvfBytY9a08+4F5Veqxc98pig6r7lp4lHivP9c7jlwt0YgFsxerqN0ThHXMvBJvNegC0nr6+tKsoNOSqolCNKFRA34k1AJmZ6PCTQdJispJXsJeMFdZm/oWX3KHh8OGh+zYRgpA9M1NY/Q13wnoY7pGQxJfFmtt8VzXMgVKcOI1ZvpPbpHF+ZT+O2562G5ZmnVIpqcvLixnFuHfSyEl3L3FlyW+qv6MAVFViKyvI31HU+iZTj9qxCdD1MU4blwln7/0JGVYAM7BuJ2QP9PwGnB2mgKFD4Z9CgMPHyW9frZIk5F0y7Idcf6edTVI6XOC10XaxdXT2d7EA32cmR+2xIPUV8hIbiiyQFHIO+SXdKpNByYMh+XgTtiQMCFXYfLqFxKC9i+Ntub4D68fIsHDXZ4Y4SqgykjC9keh0n1/f3Nko7AlAgxPGI8TxoqkSw03pU9HBvSI=
  - secure: XF/XLxa62pWq/FD5nq++c8Jw+6EvCW6NUU4pM7MuTcL+DOYTqyGz0EPBE/0NWct/KeAE+cQWGxaBsNfMMUsjTy7lFDMJWzpqBJHCmjhTJs4v47xdmj1kXYLFCWMFLbVjowMaQS7xsGr90e4R/M+iVvW6Ua4pT+RzjKvYfeOWnDqwRmq29ASCLhwkh8F1v/ENSJ3XBsuOLY4pWJ4i6yjA0/96V1t7l4bA7++Zjx4zAekXBNTdBPplip44hESqUsLaOV/e8nHvDAAV1YREWkbobIjV1iCSRaqtaeB3D88sqonNtUq9Db8nw+kcc03VH6PJApeTmqVEV1A9Ovt7t9rgedywdGnn1BAc0BCJL3k5BF78uJ6JTuPwrZSPebt6f13Cn4M+gz5a0Df6aXPvaFPQzpn2Znuuefa7aKRJYLpfntFgtMQCXP1+mqojq/sCY5ykIuum+k2DWVSgi9MDO+5RHOH719ZwNYu1wtz3p5P1xkrF6Dq74SpKNy+9GcBFzrADlUlBmw+GNFI4gfCKEud67M3rsQeFmiQEopHS15iFCxNXoIJw31/8dEqCYN+Yd0VozEqEueFobQw3crlCNrMhJlBUE3XVZKby5UJ344eRFJrVKSevHt2AstpnuIIyGIRUBMCKZjmUBf4L53j6E3zkem4kB3P9D+x8ezZVaPW7DSg=
  - secure: FNg2zykzl8hD3KsBITx6kyRnjjanRxzisHX+jbVSrNZre9RR5b2Vyj7oLjCEI/o3NZjgvNtQ0MY2LEs0Ck2c1BKmzC16ybWYhyaR1WsFF/NbRIV9TIZTpwA+T87HwsowI0Yj/Od8YREpgVdm6Ltsqtaya7ROQWlajXLc+Ifo+unOnaUFFi/euy8u9INm3II+Z5yDpR/U4owp7FGTPG0KAlXpiul/XTJH9RxOHgzQeSaFaWhy6FDI8rEWzolwv+61rw+xJBchL8IZJy3g+72WdCb5fAzJH7242dm+hK4Oa5prbdWlNyiHLThG3UV2xhSMf5j21378F2ipVgAPA32G2253sXIGNekTI3mmqr+hT2RuqtccK1Qfcj7BKstErTX7qVSjj3o5aJnBhAftFI2QbLURFOh0IgQrSTbY0G5TZUO9p/xIOY5/F5npPtcpqoppdh+iIJsBN4QNBw+vB2NRJeW0m3inXJvYwMDtbcQys6QMaVRbWMQIr62sxbuCsNPe2GTBn/qYtf5fY7mOpl2bt+4CsEzxvAbQTM3+y3UaoAmXZM90f+96gAmUfRGgDQtKQyf06K2kHsYTOsXd9hAHNIf3Vqv3vgt+5w70F+OhQFSlr8D6NxCg6ugUWUMs9nDpuDdNX0UvpRZCBU8uXoqrLWqh9X1Ahmzto+4eixps+eM=
  - secure: lMFy1uCR2FvAdQinhaFgyg/a33Q5VFkbVdsLVtgZdYqWU6I3jumZ5PfznaKnvPuK9qBfHXwnwxKC6LtC8XiSOu4P1W5FM5TS7ZCLKsQokOKnvFQghd8njqoL5HIbthlZAA59gGjMKYWX6fIO3mp2LEbPHUwj4WBCcd1wAdt8tyoh3pdg+JmqPnq+GOiVBX9/CuTQYNcTGuaOhonJqR+ARORSEH5QKBXvvtaIQEKCQjA7uzU/Tdgqtsime+O79NJbnaqIZ09y6uuIHAwz6LiDsaGlAfNEP3yWDbTWqTl7Zs/u254tOip7XKdZhWK/wVzCwnmi6IRA9jNrY04vUPrRHA/Dx5ddX70AE0dM1h6s9UXToTljlIa8j565Km8ps5SArWhLOxLYc/YaI5+tfbAcFdHw0JxH3H083b8gwnRh/mRLi+vQyTV4VaDvt340Be6nnTncWWfMkiJ0uoq/jBgkHLyFK8YaUM8NHDVdyqUI4lF+ouAV4VslBKsMid5FQKrjQQg3RwhZ8kjJmjYCUfuaG6+t6bcAQIki5Sm0h4mic0nglYnEuO5VM+h2T4XZv7UsN2xk2uzP7yXqYtIILfvP4eTbTwbintiSPK9Zt8fUhizfT8N7G0b1sNuW6IC2q3GMxSrXD5Krs4NxuzsJ3jQkpAb6Ecde5k37HtQbJCtSNRI=
  - secure: OsAX+JUXwsqA8a7zwYDw1/y/wo3m+ztqhguREV7X6km2kjR9ygx9RKzk6cgZS0yKEIb2MhIV+TuBA+pDxXXn4PLnBWo5P8sOBasLgfsedagMeCWXHO13zyIn+PWcXeD5hDBLEQ1nWj7gV0MbTxmLo4bO1uT+fD9kv2Q2NJFWe2iC4TILqMQJflnCLl7PlYX+DHMCkgcEQnTT3aJTJdZvGt4hc2EbIPVl7h9W2q9T/ionH/mVCT1fT4c7vF84BnTacEUGGKlMJs+/i2H+U70xoFON1g7alXuLONwFEWuapj+kL1m5JrnCv6bgN5umlLbGP/faaoGoU1i/fE8B+hMXY5aqQyhNRGdaUXYD2kjvy0UIF8UtCXD95lOfRq/8n6apkVDTJx0n0AyTBltUu2Doz7nuyl0zm+qVY+6ZI+bu7Sy/w45mWOKBi1HYl4rvyJYzB5wPBEE9Ey7a0uuYfawIl3EVV1JHZwDYXS8ypsA9eAcjmCdui+O92DJrIeIERrWZOotNnmkDQeS937UETL/znz96Wk2ml9Oa0U725EjCmkXcMpeYG7MUF71jkplMK85BWWSzuvzz25g8Lo0Gw7dc4hD7rzxM/FrcnhBBKKzeovLLFMWY2VyVn+EUKtXuQH0jrpSXSYWxMbacqRXEEYuul8HrU27t9zOKe7wwGQKlGSM=
  - secure: vYtYs/MiHWrooaoArLSnzDcrMmZOf/MXVJVlbkA9VWmVZhDItRIg3yIj9ko17zo8KEAvoWGV/sgF3FQoOCRHPxK1kDg6zkbMWqQh1DyrcT7q+I0UfcF+iTAhjzej/EdWQmJ627wvuuN7ZG2TviJYZiWVp5h/bWPlJZJEWipwSVjLrL0sVsrT8M+uv3/clIknlr1nzY31fn/0cPL65KJD7T4ZdXScszz46Q0O/Gb4sa8lxe75yjL+z6qSk2QST96TCn5lNB7DiczXGIq4MuoHKIqyMT2zvUFEQZuUPqtLsz5mW56OgcyGAwdkGSuIgFJdFZsVB5lYED/rVhelqqEgYqFMu+KRdAeYPt7EGYm+GXzZSqLHwO9pCgDUtWPCgNIPHc3D4lFKRt8qWQlmxJbXK6I0IDqXjrwvGyNMWrY1w2uoVbUPmq45bmgPpUlf2lbUOCnvaUdfW6lTEl4PWSU46wCmu9n5nJWUBZXjeetlGM8O4O7waJBOakRAIq9ZbtZanLSEhf5RVCZgEKN5yVzR6UTowjcsR2lxv9F1JkgRuc4/JlZffdkabATB/0fBNG61RUZlhgPd/3i4kQFwKh6BqgBs9dktSxOU0JXRMN/A4uwy+PUHzf2dHHD7QHo19kG18GwzcQ7VeqK+Ku2XixntZnRp/dnkecaEgvLwTVDvzzM=
  - secure: WkmFdw6ycyYxPRT53vwO3Q6J+At3mM1/sxsbPOr9Gur+9hxP8Wj7rN+scgQUAZm02ahocxAAxX+ZWG2Me7wtMSdiXQB5ZeAU2VPgElvzk+XNKq2GAXLFEQ838b3UHj1dY3uPVj/SjRNfWMPZkkyYB4KymGlGTu/Tf/fZJJn2xpiVPLqfvDegdwGM2Mmk4isjG/4Kcw29BBr7yaMP4pCeqAxf+EGOpCJEC2AoqDOT+20b5rv7hwSqz2u9zdTLkwfBfSyQ4Gp/3sw5hsiUpLRu1HBryYu6bW43h40QEm2jBiBB2e2TTE4E/pK/ba6qSRl52dr2UgD6b+bw8D/6+vaDon7PYfyGxDjwEaLO3hXX5AGWJFlOaNdMcEJdjB7HcyG7zrQlZaTR7aQwAq4SUWfE4RMO84+1nMPRG2Htl32mTKnPvoZHBBOYwoXreRkw8jXd2Pfq1YajcZCwmwrz/PyBiarbC64hzWqSVS1VsLhGBfnPf8qr2I03BkugDqdyItKEu7Mx7HKRPFw2eqCPFPMSFvRc3iDstL7g+ttlU806woUkWZ2h+FYKIAEic1qh2eERUfW6z1wQZ3RdeozE+9DJMBhCgdIojqpHF6BASNtZXzYp/z+zFI4ESwG8z/BomxeF3SkAilZG9XpX32dwetVLRSNH7FQAPhRCIMtFX8R+iTA=
  - secure: U/KZHm455FUNMSW/FVT5MidXDJWElIVKb21vxXUE/S+hsDzAABl2d3MOzCHLksXhE09zmQVCRFhF6CCqjrDL1pTlGuvEgnYOwuhrhlM9LLbYfOWM7GzGicZuqhxbfNWc2VbV9MoovRRjlOAUsK5kVQAqjWYzbhscLXRRYUtjYnufuDOzRKh74rAkEzs2B9d702AIK3GFS9Cd/UjC9SlcRmbtcFLwev52enVyttPHtGBa+i+4NKciqFrmZmFPkZ1agYKT+HveJ0qCZP86/OwCrzeFEzl+g25bJBmGufHNfwOsZQzaRtiYdhhSjMp6nzDgtE+6NAt/7Q4uynQWX2rT2RH7kHhv/qGMGJfsn4lbf0OGHlGsW+hSCwM5A/+UOPN4KRHeNd/C/BnHH2pOKxBzP30N354HqIdc8iJ+WPFpGyNTE8JBpqQ8MZX7xSk2HLtCe/ukDL6Z39Dqn1u37vGTOC8RX6IU5QUl2VKvOR1DS05Uc4YYE5bArzx+kz72iJzQUmSmMmXU9hAgab8B+pq3pHYJmNv9JOeDlMQ0XSesinC6qE4b1kIY1765oPpzDzOWY0g3RDXmumsYsu4eKlGEghPZx/TVB+C2Gk3HWFYF57rSReMbuaIQELADmYHvALXq0mFOeA0rgxapunB/wlaLLwnXDvNs7VdJwwxIKdwdqGg=

  
